\documentclass[12pt]{ucalgthes1}
\usepackage[pdftex]{graphicx}
\usepackage[pdftex]{color}
\usepackage[letterpaper,top=1in, bottom= 1in, left= 1in, right= 1in]{geometry}
\usepackage{hyperref}
\usepackage{mathptmx}
\usepackage{listings}
\usepackage{url}
\usepackage[tableposition=top]{caption}
\usepackage{subcaption}
\usepackage{tikz,pgfplots,pgfplotstable}
\usepackage{mathtools}
\usepgfplotslibrary{dateplot}
\usepgfplotslibrary{statistics}
\usepackage{courier}
\usepackage[square,numbers,sectionbib]{natbib}
\usepackage[sectionbib]{chapterbib}
\usepackage[numbib]{tocbibind}
\newcommand{\newblock}{}
\usepackage{eurosym}
\usepackage{multirow}
\usepackage[T1]{fontenc}
\usepackage{textcomp}
\lstset{upquote=true}
\usepackage{float}
\floatstyle{boxed}
\usepackage{blindtext}
\let\labelindent\relax
\usepackage{upquote}
\usepackage{mdframed}
%\usepackage{balance}
\usepackage{enumitem}

\title{Automated Example Oriented REST API Documenation}
%
%            Insert the correct information between the {}
%
\author{S M Sohan}
\thesisyear{2017}
\thesis{thesis}    % the word dissertation can be inserted between {}
\newcommand{\thesistitle}{Automated Example Oriented REST API Documenation}
\monthname{September}
\dept{GRADUATE PROGRAM IN COMPUTER SCIENCE}
\degree{DOCTOR OF PHILOSOPHY}
%
%                    End of supplied information
%
\begin{document}
\makethesistitle
\pagenumbering{roman}     % resets page counter to one
\setcounter{page}{2}
\chapter*{UNIVERSITY OF CALGARY \\ FACULTY OF GRADUATE STUDIES}
\thispagestyle{empty}
The undersigned certify that they have read, and recommend
to the Faculty of Graduate Studies for acceptance, a \Thesis\ entitled
``\thesistitle'' submitted by \Author\
in partial fulfillment of the requirements for the degree of
\Degree.\\

%
%                 Substitute  List of Examiners
%
\begin{signing}{Department of Computer Science}
\signline
Dr. Frank Maurer \\
Supervisor\\
Department of Computer Science \\
University of Calgary \\
Canada\\
\signline
Dr. Mea Wang\\
Supervisory Committee Member\\
Department of Computer Science \\
University of Calgary \\
Canada\\
\signline
Dr. Craig Anslow\\
Supervisory Committee Member\\
School of Eng. and Computer Science \\
Victoria University of Wellington\\
New Zealand\\
\end{signing}
%
\newpage
\phantomsection
\altchapter{\bf{Abstract}}
API documentation presents both a problem and an opportunity for API usability. Most developers learn to use an API based on its documentation and at the same time face obstacles using the APIs due to lack of necessary information in the documentation \cite{Robillard_what_makes}. REST APIs provide interconnectivity between applications over HTTP. Documentation of a REST API is a key information source for software developers that use these types of API. As a REST API evolves, the documentation needs to be maintained alongside. This implies that REST API developers also need to efficiently generate and maintain the documentation of their APIs with the qualities that make the API usable. This introduces the problem of interest in this research: how to document REST APIs?

This is a problem because there is a lack of scientifically established guidelines and automated tool support for REST API documentation with usage examples. Existing local API documentation techniques and tools are not readily usable for the documentation of REST APIs because REST APIs have HTTP protocol specific parameters, and API clients are agonistic to the programming languages used to implement the APIs. Existing REST API documentation techniques rely on custom API definition languages that require manual effort to generate and maintain REST API documentation as a separate artifact as the API evolves.

In this reasearch, I proposed and evaluated a novel technique to solve REST API documentaiton requirements. I identified the requirements by studying the existing literature and the current state of REST API documentation in practice. The technique involves the interception of example REST API calls using an HTTP proxy server to auto-generate an accurate and updated REST API documentation.

Practioners can use the presented technique to automatically generate and maintain an updated documentation of REST APIs including the API structure and usage examples from their API test code. Researchers can apply the novel concept of using interception to automatically document API usage examples from test scripts to other forms of APIs.

\newpage
\phantomsection
\altchapter{\bf{Acknowledgements}}

\begin{singlespace}
\newpage
\phantomsection
\tableofcontents
\pagestyle{plain}
\newpage
\phantomsection
\listoftables
\pagestyle{plain}
\newpage
\phantomsection
\listoffigures
\pagestyle{plain}
\clearpage
\clearpage          % otherwise tables will be numbered wrong
\end{singlespace}
\newpage
\phantomsection
\chapter*{\bf{List of Symbols, Abbreviations and Nomenclature}\hfill} \addcontentsline{toc}{chapter}{List of Symbols}
\listofsymbols
\pagestyle{plain}
\clearpage

\pagenumbering{arabic}
\graphicspath{{controlled_study/}, {case_study/}, {cisco_study/}, {spy_rest/}, {demo_paper/}}
\pgfplotsset{table/search path={controlled_study,case_study}}
\renewcommand\bibname{References}

\chapter{Introduction}
Application Programming Interfaces, commonly known as APIs, are used to express a software component in terms of its operations, inputs, outputs, and their types\footnote{\url{https://en.wikipedia.org/wiki/Application_programming_interface}}. Robillard defines an API as follows: An API is the interface to implement functionality that developers can access to perform various tasks \cite{Robillard_a_field_study} \cite{Robillard_what_makes}. APIs enable multiple software components to interact with each other.

REST APIs are a type of APIs that are used to integrate software components using web technologies. Fielding defined Representational State Transfer or REST as an architectural style for developing distributed hypermedia systems \cite{Fielding_rest}. For example, the GitHub REST API\footnote{\url{https://developer.github.com/v3/repos/\#create}} has a resource called \texttt{Repository} to denote a code repository that can be identified by the URL \url{/user/repos}. To create a new \texttt{Repository} for a user, the GitHub API can be invoked via HTTP $POST$ at \url{/user/repos} using the following JSON representation of a \texttt{Repository}:

\begin{verbatim}
{
  "name": "Hello-World",
  "description": "This is your first repository",
  "homepage": "https://github.com",
  "private": false,
  "has_issues": true,
  "has_wiki": true,
  "has_downloads": true
}
\end{verbatim}

In today's world of technology, REST APIs have become ubiquitous and the primary choice for integrating Internet enabled applications due to its simplicity and similarity with HTTP \cite{mangler2010origin}. For example, a real estate listing website uses a REST API to collect ``walk score'' and another REST API to show a map view of a property listing. By incorporating the map and walk score using REST APIs, the real estate listng site provides important information to their users. Most REST APIs, including these two examples, are often documented manually or using custom implemented tools specific to the APIs that are not publicly available. This requires effort to generate and maintain the documentation of REST APIs over time since there is a lack of reusable tool support.

Previous research in the area of API usability mostly focused on local APIs such as Java libraries. Researchers identified the documentation of APIs as both the primary source of information as well as the key obstacle for API usability \cite{Robillard_what_makes}. Hence the quality of the API documentation plays an important role in API usability. To this regard, researchers have identified the qualities of ``good API documentation'' as follows: complete, correct, includes thorough explanations and code examples, provides consistent presentation and organization \cite{Robillard_what_makes,Myers_study}. Today, there are several tools such as Junit\footnote{\url{http://junit.org/}}, UsETeC \cite{zhu2014mining}, Jadeite \cite{Jadeite}, APIMiner \cite{montandon2013documenting}, Roast \cite{Hoffman_api_documentation} that can be used to document local APIs with the aforementioned qualities .

While there are overlaps between the documentation requirements of local and REST APIs, there are significant requirements that are unique to each. For example, REST API documentation needs to include information about its API endpoints, HTTP headers, and request and response payloads. On the other hand, documentation of local APIs need to explain the classes and methods. Due to such differences between local and REST APIs, the existing technique and tools for local API documentation cannot be readily used to generate REST API documentation.

\begin{figure}[htb]
  \includegraphics[width=\linewidth]{manual_workflow.png}
  \caption{Manual REST API Documentation Steps}
  \label{fig:manual}
\end{figure}

Currently, the process of documenting REST APIs are largely manual. Conceptually, the high level steps involved in the manual process can be identified as shown in Figure \ref{fig:manual}. These steps S1-S7 can be described as follows: S1 - API developer prepares an example API with the required HTTP parameters and request body, S2 - API developer uses a REST API client to make the example API call, S3 - the API developer records the HTTP data , S4 - API developer then edits the recorded data so that only relevant content is selected for documentation, S5 - API developers use any custom content to describe the API example, S6 - API developers combine the custom content with the edited content from the HTTP traffic into HTML to publish to the web, and S7 - API developer adds custom overview information to explain API concepts and general rules, and publishes the final documentation so other developers can learn the API. The steps S1-S6 are repeated for every API action that needs to be documented, and S1-S7 need to repeated for every version of the REST API as it evolves. As depicted here, this manual process can be both time consuming and error-prone.

This thesis is ogranized as follows. In Chapter~\ref{chapter:case_study}, I discuss a case study to summarize the state of existing literature and industry practices related to the versioning, documentation, and change communication patterns of evolving Web APIs. The primary findings from this study are as follows: Web APIs evolve frequently, often several times a week, including both compatible and incompatible API changes, using manual or bespoke methods to version, document, and communicate the changes as they evolve. I found a lack of reusable techniques in the existing literature to automatically generate and maintain the documentation of multi-version evolving REST APIs with usage examples. I persued further research to solve this problem as discussed in the following paragraphs.

In Chapter~\ref{chapter:spy_rest}, I present the following list of REST API documentation requirements by studying the literature and applying the findings from Chapter~\ref{chapter:case_study}: 1) automated, 2) example based, 3) executable, 4) version aware, 5) customizable, 6) reusable, and 7) collaborative. I present, SpyREST, a novel technique to intercept example REST API calls using an HTTP proxy server to collect and autmatically synthesize API traffic to generate and update API documentation to satisfy the aforementioned requirements. The primary advantage of the presented technique is that the documentation is generated from executable code. Existing techniques that rely on formatted comments or manually written API descriptions following custom languages require manual effort to find and update the API documentation everytime an API evolves.

In Chapter~\ref{chapter:demo_paper}, I present a prototype implementation of the aformentioned technique to demonstrate a reusable tool and compare it against the existing REST API documentation tools that rely on custom API description languages. I also present an example where automated test code can be used to generate and maintain REST API documentation using the developed tool.

I discuss an industrial evaluation of the proposed technique and the tool based on an eigtheen month period of production use at Cisco in Chapter~\ref{chapter:cisco_study}. From the study I found that it is feasible to use the interception technique and automated tests to document REST APIs satisfying the aforementioned requirements for an evolving API. Automated always-updated REST API documentation was found to help establish a quick feedback cycle among the stakeholders. I also discuss several refinements and limitations of the proposed technique based on the lessons learned from this case study.

In Chapter~\ref{chapter:controlled_study}, I discuss a controlled study performed with 26 professional software engineers to undestand the impact of usage examples on REST API client developers. I provided an enahanced REST API documentation with usage examples containing data from API test code to participants of one of two study groups to perform the same set of API tasks. I found that without usage examples participants faced obstacles related to using appropriate data types, data formats, and required elements in the HTTP headers, query parameters, and request body. I observed that providing usage examples with data taken from API test code improves API client developer success rate, reduces required trial attempts, and improves satisfaction ratings.

\include{case_study/case_study}
\include{spy_rest/spy_rest}
\include{demo_paper/demo_paper}
\include{cisco_study/cisco_study}
\include{controlled_study/controlled_study}
\chapter{Conclusion}
\appendix
\end{document}
